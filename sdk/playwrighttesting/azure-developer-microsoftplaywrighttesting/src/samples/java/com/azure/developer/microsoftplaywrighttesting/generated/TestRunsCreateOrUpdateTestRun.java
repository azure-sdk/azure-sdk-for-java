// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.developer.microsoftplaywrighttesting.generated;

import com.azure.core.util.Configuration;
import com.azure.developer.microsoftplaywrighttesting.ReportingClientBuilder;
import com.azure.developer.microsoftplaywrighttesting.TestRunsClient;
import com.azure.developer.microsoftplaywrighttesting.models.CiConfig;
import com.azure.developer.microsoftplaywrighttesting.models.CiProviderName;
import com.azure.developer.microsoftplaywrighttesting.models.RunnerType;
import com.azure.developer.microsoftplaywrighttesting.models.ShardDetails;
import com.azure.developer.microsoftplaywrighttesting.models.TestFramework;
import com.azure.developer.microsoftplaywrighttesting.models.TestFrameworkName;
import com.azure.developer.microsoftplaywrighttesting.models.TestRun;
import com.azure.developer.microsoftplaywrighttesting.models.TestRunConfig;
import com.azure.developer.microsoftplaywrighttesting.models.TestSdkLanguage;
import com.azure.identity.DefaultAzureCredentialBuilder;
import java.time.OffsetDateTime;

public class TestRunsCreateOrUpdateTestRun {
    public static void main(String[] args) {
        TestRunsClient testRunsClient
            = new ReportingClientBuilder().credential(new DefaultAzureCredentialBuilder().build())
                .endpoint(Configuration.getGlobalConfiguration().get("ENDPOINT"))
                .buildTestRunsClient();
        // BEGIN:com.azure.developer.microsoftplaywrighttesting.generated.testrunscreateorupdate.testrunscreateorupdatetestrun
        TestRun response = testRunsClient.createOrUpdate("4eastasia_a56bbc94-fbb7-4c20-9b17-981067e4580a",
            "123e4567-e89b-12d3-a456-426614174000",
            new TestRun().setDisplayName("Sample Test Run")
                .setCreationTime(OffsetDateTime.parse("2024-09-28T12:32:33Z"))
                .setCiConfig(new CiConfig().setCiProviderName(CiProviderName.fromString("Ado"))
                    .setBranch("main")
                    .setAuthor("John Doe")
                    .setRevisionUrl("https://github.com/azure-rest-api-specs/1234"))
                .setTestRunConfig(new TestRunConfig().setRetryCount(3)
                    .setRepeatEach(5000)
                    .setTestFramework(new TestFramework().setName(TestFrameworkName.PLAYWRIGHT)
                        .setVersion("3.1.0")
                        .setRunnerType(RunnerType.NUNIT))
                    .setShardDetails(new ShardDetails().setTotal(5))
                    .setTimeoutInMs(60000L)
                    .setTestType("WebTest")
                    .setTestSdkLanguage(TestSdkLanguage.JAVA_SCRIPT)
                    .setServicePackageVersion("1.0.0-beta.4"))
                .setCloudReportingEnabled(false));
        // END:com.azure.developer.microsoftplaywrighttesting.generated.testrunscreateorupdate.testrunscreateorupdatetestrun
    }
}
