// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.monitorpipelinegroups.generated;

import com.azure.resourcemanager.monitorpipelinegroups.models.AzureMonitorWorkspaceLogsApiConfig;
import com.azure.resourcemanager.monitorpipelinegroups.models.AzureMonitorWorkspaceLogsExporter;
import com.azure.resourcemanager.monitorpipelinegroups.models.AzureResourceManagerCommonTypesExtendedLocation;
import com.azure.resourcemanager.monitorpipelinegroups.models.CacheConfiguration;
import com.azure.resourcemanager.monitorpipelinegroups.models.ConcurrencyConfiguration;
import com.azure.resourcemanager.monitorpipelinegroups.models.Exporter;
import com.azure.resourcemanager.monitorpipelinegroups.models.ExporterType;
import com.azure.resourcemanager.monitorpipelinegroups.models.ExtendedLocationType;
import com.azure.resourcemanager.monitorpipelinegroups.models.ExternalNetworkingMode;
import com.azure.resourcemanager.monitorpipelinegroups.models.JsonArrayMapper;
import com.azure.resourcemanager.monitorpipelinegroups.models.JsonMapperDestinationField;
import com.azure.resourcemanager.monitorpipelinegroups.models.JsonMapperElement;
import com.azure.resourcemanager.monitorpipelinegroups.models.JsonMapperSourceField;
import com.azure.resourcemanager.monitorpipelinegroups.models.NetworkingConfiguration;
import com.azure.resourcemanager.monitorpipelinegroups.models.NetworkingRoute;
import com.azure.resourcemanager.monitorpipelinegroups.models.Pipeline;
import com.azure.resourcemanager.monitorpipelinegroups.models.PipelineGroupProperties;
import com.azure.resourcemanager.monitorpipelinegroups.models.PipelineType;
import com.azure.resourcemanager.monitorpipelinegroups.models.Processor;
import com.azure.resourcemanager.monitorpipelinegroups.models.ProcessorType;
import com.azure.resourcemanager.monitorpipelinegroups.models.Receiver;
import com.azure.resourcemanager.monitorpipelinegroups.models.ReceiverType;
import com.azure.resourcemanager.monitorpipelinegroups.models.RecordMap;
import com.azure.resourcemanager.monitorpipelinegroups.models.SchemaMap;
import com.azure.resourcemanager.monitorpipelinegroups.models.Service;
import com.azure.resourcemanager.monitorpipelinegroups.models.StreamEncodingType;
import com.azure.resourcemanager.monitorpipelinegroups.models.SyslogReceiver;
import com.azure.resourcemanager.monitorpipelinegroups.models.UdpReceiver;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

/**
 * Samples for PipelineGroups CreateOrUpdate.
 */
public final class PipelineGroupsCreateOrUpdateSamples {
    /*
     * x-ms-original-file:
     * specification/monitor/resource-manager/Microsoft.Monitor/PipelineGroups/preview/2024-10-01-preview/examples/
     * PipelineGroupCreateSyslogsWithNetworking.json
     */
    /**
     * Sample code: Create a PipelineGroup instance using a syslog receiver and networking configurations.
     * 
     * @param manager Entry point to AzureMonitorPipelinesManager.
     */
    public static void createAPipelineGroupInstanceUsingASyslogReceiverAndNetworkingConfigurations(
        com.azure.resourcemanager.monitorpipelinegroups.AzureMonitorPipelinesManager manager) {
        manager.pipelineGroups()
            .define("plGroup1")
            .withRegion("eastus2")
            .withExistingResourceGroup("myResourceGroup")
            .withTags(mapOf("tag1", "A", "tag2", "B"))
            .withProperties(new PipelineGroupProperties()
                .withReceivers(Arrays.asList(new Receiver().withType(ReceiverType.SYSLOG)
                    .withName("syslog-receiver1")
                    .withSyslog(new SyslogReceiver().withEndpoint("0.0.0.0:514"))))
                .withProcessors(Arrays.asList())
                .withExporters(Arrays.asList(new Exporter().withType(ExporterType.AZURE_MONITOR_WORKSPACE_LOGS)
                    .withName("my-workspace-logs-exporter1")
                    .withAzureMonitorWorkspaceLogs(new AzureMonitorWorkspaceLogsExporter()
                        .withApi(new AzureMonitorWorkspaceLogsApiConfig()
                            .withDataCollectionEndpointUrl(
                                "https://logs-myingestion-eb0s.eastus-1.ingest.monitor.azure.com")
                            .withStream("Custom-MyTableRawData_CL")
                            .withDataCollectionRule("dcr-00000000000000000000000000000000")
                            .withSchema(new SchemaMap()
                                .withRecordMap(Arrays.asList(new RecordMap().withFrom("body").withTo("Body"),
                                    new RecordMap().withFrom("severity_text").withTo("SeverityText"),
                                    new RecordMap().withFrom("time_unix_nano").withTo("TimeGenerated")))))
                        .withConcurrency(new ConcurrencyConfiguration().withWorkerCount(4).withBatchQueueSize(100)))))
                .withService(new Service().withPipelines(Arrays.asList(new Pipeline().withName("MyPipelineForLogs1")
                    .withType(PipelineType.LOGS)
                    .withReceivers(Arrays.asList("syslog-receiver1"))
                    .withProcessors(Arrays.asList())
                    .withExporters(Arrays.asList("my-workspace-logs-exporter1")))))
                .withNetworkingConfigurations(Arrays.asList(
                    new NetworkingConfiguration().withExternalNetworkingMode(ExternalNetworkingMode.LOAD_BALANCER_ONLY)
                        .withHost("azuremonitorpipeline.contoso.com")
                        .withRoutes(Arrays.asList(new NetworkingRoute().withReceiver("syslog-receiver1"))))))
            .withExtendedLocation(new AzureResourceManagerCommonTypesExtendedLocation().withName(
                "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/myResourceGroup/providers/microsoft.extendedlocation/customlocations/myTestCustomLocation")
                .withType(ExtendedLocationType.CUSTOM_LOCATION))
            .create();
    }

    /*
     * x-ms-original-file:
     * specification/monitor/resource-manager/Microsoft.Monitor/PipelineGroups/preview/2024-10-01-preview/examples/
     * PipelineGroupCreateSyslogs.json
     */
    /**
     * Sample code: Create a PipelineGroup instance using a syslog receiver.
     * 
     * @param manager Entry point to AzureMonitorPipelinesManager.
     */
    public static void createAPipelineGroupInstanceUsingASyslogReceiver(
        com.azure.resourcemanager.monitorpipelinegroups.AzureMonitorPipelinesManager manager) {
        manager.pipelineGroups()
            .define("plGroup1")
            .withRegion("eastus2")
            .withExistingResourceGroup("myResourceGroup")
            .withTags(mapOf("tag1", "A", "tag2", "B"))
            .withProperties(new PipelineGroupProperties()
                .withReceivers(Arrays.asList(new Receiver().withType(ReceiverType.SYSLOG)
                    .withName("syslog-receiver1")
                    .withSyslog(new SyslogReceiver().withEndpoint("0.0.0.0:514"))))
                .withProcessors(
                    Arrays.asList(new Processor().withType(ProcessorType.BATCH).withName("batch-processor1")))
                .withExporters(Arrays.asList(new Exporter().withType(ExporterType.AZURE_MONITOR_WORKSPACE_LOGS)
                    .withName("my-workspace-logs-exporter1")
                    .withAzureMonitorWorkspaceLogs(new AzureMonitorWorkspaceLogsExporter()
                        .withApi(new AzureMonitorWorkspaceLogsApiConfig()
                            .withDataCollectionEndpointUrl(
                                "https://logs-myingestion-eb0s.eastus-1.ingest.monitor.azure.com")
                            .withStream("Custom-MyTableRawData_CL")
                            .withDataCollectionRule("dcr-00000000000000000000000000000000")
                            .withSchema(new SchemaMap()
                                .withRecordMap(Arrays.asList(new RecordMap().withFrom("body").withTo("Body"),
                                    new RecordMap().withFrom("severity_text").withTo("SeverityText"),
                                    new RecordMap().withFrom("time_unix_nano").withTo("TimeGenerated")))))
                        .withConcurrency(new ConcurrencyConfiguration().withWorkerCount(4).withBatchQueueSize(100)))))
                .withService(new Service().withPipelines(Arrays.asList(new Pipeline().withName("MyPipelineForLogs1")
                    .withType(PipelineType.LOGS)
                    .withReceivers(Arrays.asList("syslog-receiver1"))
                    .withProcessors(Arrays.asList("batch-processor1"))
                    .withExporters(Arrays.asList("my-workspace-logs-exporter1"))))))
            .withExtendedLocation(new AzureResourceManagerCommonTypesExtendedLocation().withName(
                "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/myResourceGroup/providers/microsoft.extendedlocation/customlocations/myTestCustomLocation")
                .withType(ExtendedLocationType.CUSTOM_LOCATION))
            .create();
    }

    /*
     * x-ms-original-file:
     * specification/monitor/resource-manager/Microsoft.Monitor/PipelineGroups/preview/2024-10-01-preview/examples/
     * PipelineGroupCreateUdpWithJsonArrayMapper.json
     */
    /**
     * Sample code: Create a PipelineGroup instance using a UDP receiver with json array mapper.
     * 
     * @param manager Entry point to AzureMonitorPipelinesManager.
     */
    public static void createAPipelineGroupInstanceUsingAUDPReceiverWithJsonArrayMapper(
        com.azure.resourcemanager.monitorpipelinegroups.AzureMonitorPipelinesManager manager) {
        manager.pipelineGroups()
            .define("plGroup1")
            .withRegion("eastus2")
            .withExistingResourceGroup("myResourceGroup")
            .withTags(mapOf("tag1", "A", "tag2", "B"))
            .withProperties(
                new PipelineGroupProperties()
                    .withReceivers(Arrays.asList(new Receiver().withType(ReceiverType.UDP)
                        .withName("udp-receiver1")
                        .withUdp(new UdpReceiver().withEndpoint("0.0.0.0:518")
                            .withEncoding(StreamEncodingType.UTF_8)
                            .withJsonArrayMapper(new JsonArrayMapper()
                                .withSourceField(new JsonMapperSourceField().withFieldName("field1"))
                                .withDestinationField(
                                    new JsonMapperDestinationField().withDestination(JsonMapperElement.ATTRIBUTES))
                                .withKeys(Arrays.asList("key1", "key2", "key3"))))))
                    .withProcessors(Arrays.asList())
                    .withExporters(Arrays.asList(new Exporter().withType(ExporterType.AZURE_MONITOR_WORKSPACE_LOGS)
                        .withName("my-workspace-logs-exporter1")
                        .withAzureMonitorWorkspaceLogs(new AzureMonitorWorkspaceLogsExporter()
                            .withApi(new AzureMonitorWorkspaceLogsApiConfig()
                                .withDataCollectionEndpointUrl(
                                    "https://logs-myingestion-eb0s.eastus-1.ingest.monitor.azure.com")
                                .withStream("Custom-MyTableRawData_CL")
                                .withDataCollectionRule("dcr-00000000000000000000000000000000")
                                .withSchema(new SchemaMap()
                                    .withRecordMap(Arrays.asList(new RecordMap().withFrom("body").withTo("Body"),
                                        new RecordMap().withFrom("severity_text").withTo("SeverityText"),
                                        new RecordMap().withFrom("time_unix_nano").withTo("TimeGenerated")))))
                            .withConcurrency(
                                new ConcurrencyConfiguration().withWorkerCount(4).withBatchQueueSize(100)))))
                    .withService(new Service().withPipelines(Arrays.asList(new Pipeline().withName("MyPipelineForLogs1")
                        .withType(PipelineType.LOGS)
                        .withReceivers(Arrays.asList("udp-receiver1"))
                        .withProcessors(Arrays.asList())
                        .withExporters(Arrays.asList("my-workspace-logs-exporter1"))))))
            .withExtendedLocation(new AzureResourceManagerCommonTypesExtendedLocation().withName(
                "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/myResourceGroup/providers/microsoft.extendedlocation/customlocations/myTestCustomLocation")
                .withType(ExtendedLocationType.CUSTOM_LOCATION))
            .create();
    }

    /*
     * x-ms-original-file:
     * specification/monitor/resource-manager/Microsoft.Monitor/PipelineGroups/preview/2024-10-01-preview/examples/
     * PipelineGroupCreateUdp.json
     */
    /**
     * Sample code: Create a PipelineGroup instance using UDP receiver.
     * 
     * @param manager Entry point to AzureMonitorPipelinesManager.
     */
    public static void createAPipelineGroupInstanceUsingUDPReceiver(
        com.azure.resourcemanager.monitorpipelinegroups.AzureMonitorPipelinesManager manager) {
        manager.pipelineGroups()
            .define("plGroup1")
            .withRegion("eastus2")
            .withExistingResourceGroup("myResourceGroup")
            .withTags(mapOf("tag1", "A", "tag2", "B"))
            .withProperties(new PipelineGroupProperties()
                .withReceivers(Arrays.asList(new Receiver().withType(ReceiverType.UDP)
                    .withName("udp-receiver1")
                    .withUdp(new UdpReceiver().withEndpoint("0.0.0.0:518").withEncoding(StreamEncodingType.UTF_8))))
                .withProcessors(Arrays.asList())
                .withExporters(Arrays.asList(new Exporter().withType(ExporterType.AZURE_MONITOR_WORKSPACE_LOGS)
                    .withName("my-workspace-logs-exporter1")
                    .withAzureMonitorWorkspaceLogs(new AzureMonitorWorkspaceLogsExporter()
                        .withApi(new AzureMonitorWorkspaceLogsApiConfig()
                            .withDataCollectionEndpointUrl(
                                "https://logs-myingestion-eb0s.eastus-1.ingest.monitor.azure.com")
                            .withStream("Custom-MyTableRawData_CL")
                            .withDataCollectionRule("dcr-00000000000000000000000000000000")
                            .withSchema(new SchemaMap()
                                .withRecordMap(Arrays.asList(new RecordMap().withFrom("body").withTo("Body"),
                                    new RecordMap().withFrom("severity_text").withTo("SeverityText"),
                                    new RecordMap().withFrom("time_unix_nano").withTo("TimeGenerated")))))
                        .withConcurrency(new ConcurrencyConfiguration().withWorkerCount(4).withBatchQueueSize(100)))))
                .withService(new Service().withPipelines(Arrays.asList(new Pipeline().withName("MyPipelineForLogs1")
                    .withType(PipelineType.LOGS)
                    .withReceivers(Arrays.asList("udp-receiver1"))
                    .withProcessors(Arrays.asList())
                    .withExporters(Arrays.asList("my-workspace-logs-exporter1"))))))
            .withExtendedLocation(new AzureResourceManagerCommonTypesExtendedLocation().withName(
                "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/myResourceGroup/providers/microsoft.extendedlocation/customlocations/myTestCustomLocation")
                .withType(ExtendedLocationType.CUSTOM_LOCATION))
            .create();
    }

    /*
     * x-ms-original-file:
     * specification/monitor/resource-manager/Microsoft.Monitor/PipelineGroups/preview/2024-10-01-preview/examples/
     * PipelineGroupCreateSyslogsWithCache.json
     */
    /**
     * Sample code: Create a PipelineGroup instance using a syslog receiver and cache.
     * 
     * @param manager Entry point to AzureMonitorPipelinesManager.
     */
    public static void createAPipelineGroupInstanceUsingASyslogReceiverAndCache(
        com.azure.resourcemanager.monitorpipelinegroups.AzureMonitorPipelinesManager manager) {
        manager.pipelineGroups()
            .define("plGroup1")
            .withRegion("eastus2")
            .withExistingResourceGroup("myResourceGroup")
            .withTags(mapOf("tag1", "A", "tag2", "B"))
            .withProperties(new PipelineGroupProperties()
                .withReceivers(Arrays.asList(new Receiver().withType(ReceiverType.SYSLOG)
                    .withName("syslog-receiver1")
                    .withSyslog(new SyslogReceiver().withEndpoint("0.0.0.0:514"))))
                .withProcessors(
                    Arrays.asList(new Processor().withType(ProcessorType.BATCH).withName("batch-processor1")))
                .withExporters(Arrays.asList(new Exporter().withType(ExporterType.AZURE_MONITOR_WORKSPACE_LOGS)
                    .withName("my-workspace-logs-exporter1")
                    .withAzureMonitorWorkspaceLogs(new AzureMonitorWorkspaceLogsExporter()
                        .withApi(new AzureMonitorWorkspaceLogsApiConfig()
                            .withDataCollectionEndpointUrl(
                                "https://logs-myingestion-eb0s.eastus-1.ingest.monitor.azure.com")
                            .withStream("Custom-MyTableRawData_CL")
                            .withDataCollectionRule("dcr-00000000000000000000000000000000")
                            .withSchema(new SchemaMap()
                                .withRecordMap(Arrays.asList(new RecordMap().withFrom("body").withTo("Body"),
                                    new RecordMap().withFrom("severity_text").withTo("SeverityText"),
                                    new RecordMap().withFrom("time_unix_nano").withTo("TimeGenerated")))))
                        .withConcurrency(new ConcurrencyConfiguration().withWorkerCount(4).withBatchQueueSize(100))
                        .withCache(new CacheConfiguration().withMaxStorageUsage(100).withRetentionPeriod(10)))))
                .withService(new Service().withPipelines(Arrays.asList(new Pipeline().withName("MyPipelineForLogs1")
                    .withType(PipelineType.LOGS)
                    .withReceivers(Arrays.asList("syslog-receiver1"))
                    .withProcessors(Arrays.asList("batch-processor1"))
                    .withExporters(Arrays.asList("my-workspace-logs-exporter1"))))))
            .withExtendedLocation(new AzureResourceManagerCommonTypesExtendedLocation().withName(
                "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/myResourceGroup/providers/microsoft.extendedlocation/customlocations/myTestCustomLocation")
                .withType(ExtendedLocationType.CUSTOM_LOCATION))
            .create();
    }

    // Use "Map.of" if available
    @SuppressWarnings("unchecked")
    private static <T> Map<String, T> mapOf(Object... inputs) {
        Map<String, T> map = new HashMap<>();
        for (int i = 0; i < inputs.length; i += 2) {
            String key = (String) inputs[i];
            T value = (T) inputs[i + 1];
            map.put(key, value);
        }
        return map;
    }
}
