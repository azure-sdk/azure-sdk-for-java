// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.migrate.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migrate.MigrateManager;
import com.azure.resourcemanager.migrate.models.MachineAssessmentV2Summary;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class MachineAssessmentV2SummaryOperationsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"summaryType\":\"Strategy\",\"summaryName\":\"xdxr\",\"sources\":[{\"sourceName\":\"SqlDatabase\",\"sourceType\":\"Server\",\"platform\":\"PaaS\",\"count\":737609208},{\"sourceName\":\"SqlDatabase\",\"sourceType\":\"Unknown\",\"platform\":\"Unknown\",\"count\":1019657066},{\"sourceName\":\"OracleDatabase\",\"sourceType\":\"Machine\",\"platform\":\"Unknown\",\"count\":1454988388},{\"sourceName\":\"Unknown\",\"sourceType\":\"Server\",\"platform\":\"Unknown\",\"count\":1032331086}],\"targets\":[{\"targetName\":\"OracleIaasVM\",\"targetType\":\"Server\",\"platform\":\"IaaS\",\"count\":1280631673},{\"targetName\":\"FlexServerPG\",\"targetType\":\"Machine\",\"platform\":\"PaaS\",\"count\":1872827948},{\"targetName\":\"AzureSpringApps\",\"targetType\":\"ManagementServer\",\"platform\":\"Unknown\",\"count\":1263192387},{\"targetName\":\"Avs\",\"targetType\":\"ManagementServer\",\"platform\":\"PaaS\",\"count\":980549756}],\"targetSourceMapping\":[{\"sourceRef\":\"Unknown\",\"targetRef\":\"AzureSpringApps\",\"sourceCount\":1316469962,\"targetCount\":297328779,\"migrationDetails\":{\"readinessSummary\":[{},{},{}],\"migrationType\":\"Unknown\"},\"managementDetails\":[{},{},{}],\"costDetails\":[{},{},{},{}],\"savingsDetails\":[{},{}],\"confidenceScore\":25.39340732212677},{\"sourceRef\":\"OracleDatabase\",\"targetRef\":\"AzureAppServiceContainer\",\"sourceCount\":615108235,\"targetCount\":1591182394,\"migrationDetails\":{\"readinessSummary\":[{},{},{}],\"migrationType\":\"Retain\"},\"managementDetails\":[{},{},{},{}],\"costDetails\":[{},{}],\"savingsDetails\":[{},{},{}],\"confidenceScore\":4.0814142253364105},{\"sourceRef\":\"OracleDatabase\",\"targetRef\":\"AzureSpringApps\",\"sourceCount\":625929025,\"targetCount\":1697622666,\"migrationDetails\":{\"readinessSummary\":[{},{}],\"migrationType\":\"Replatform\"},\"managementDetails\":[{}],\"costDetails\":[{},{}],\"savingsDetails\":[{},{},{}],\"confidenceScore\":35.425091747511715},{\"sourceRef\":\"OracleServer\",\"targetRef\":\"SqlMI\",\"sourceCount\":1586298558,\"targetCount\":185421372,\"migrationDetails\":{\"readinessSummary\":[{},{}],\"migrationType\":\"Rehost\"},\"managementDetails\":[{},{},{},{}],\"costDetails\":[{}],\"savingsDetails\":[{},{}],\"confidenceScore\":7.75031898043358}],\"costComponents\":[{\"savingOptions\":\"RI3Year\",\"costDetail\":[{},{},{}]},{\"savingOptions\":\"SavingsPlan3Year\",\"costDetail\":[{},{},{}]},{\"savingOptions\":\"None\",\"costDetail\":[{},{}]}],\"savingsComponents\":[{\"savingOptions\":\"CustomAzureOfferCode\",\"savingsDetail\":[{},{},{}]},{\"savingOptions\":\"None\",\"savingsDetail\":[{}]},{\"savingOptions\":\"CustomAzureOfferCode\",\"savingsDetail\":[{}]},{\"savingOptions\":\"None\",\"savingsDetail\":[{},{}]}]},\"id\":\"kif\",\"name\":\"vtpuqujmqlgk\",\"type\":\"btndo\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrateManager manager = MigrateManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        MachineAssessmentV2Summary response = manager.machineAssessmentV2SummaryOperations()
            .getWithResponse("tiagx", "dszue", "psbzkfzbeyvpn", "icvi", com.azure.core.util.Context.NONE)
            .getValue();

    }
}
