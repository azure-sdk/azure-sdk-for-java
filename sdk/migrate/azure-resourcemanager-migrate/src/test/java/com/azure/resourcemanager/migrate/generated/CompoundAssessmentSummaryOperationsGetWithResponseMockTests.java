// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.azure.resourcemanager.migrate.generated;

import com.azure.core.credential.AccessToken;
import com.azure.core.http.HttpClient;
import com.azure.core.management.profile.AzureProfile;
import com.azure.core.models.AzureCloud;
import com.azure.core.test.http.MockHttpResponse;
import com.azure.resourcemanager.migrate.MigrateManager;
import com.azure.resourcemanager.migrate.models.WebAppCompoundAssessmentSummary;
import com.azure.resourcemanager.migrate.models.WebAppType;
import com.azure.resourcemanager.migrate.models.WebServerType;
import java.nio.charset.StandardCharsets;
import java.time.OffsetDateTime;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import reactor.core.publisher.Mono;

public final class CompoundAssessmentSummaryOperationsGetWithResponseMockTests {
    @Test
    public void testGetWithResponse() throws Exception {
        String responseStr
            = "{\"properties\":{\"summaryType\":\"Unknown\",\"summaryName\":\"yvxyqjp\",\"sources\":[{\"sourceName\":\"SpringbootApplication\",\"sourceType\":\"Database\",\"platform\":\"SaaS\",\"count\":1035421848},{\"sourceName\":\"OracleServer\",\"sourceType\":\"WebApplication\",\"platform\":\"IaaS\",\"count\":1452431495},{\"sourceName\":\"Machine\",\"sourceType\":\"WebServer\",\"platform\":\"Unknown\",\"count\":1022740915},{\"sourceName\":\"OracleServer\",\"sourceType\":\"Host\",\"platform\":\"Unknown\",\"count\":97546857}],\"targets\":[{\"targetName\":\"MySQLAzureFlexServer\",\"targetType\":\"WebApplication\",\"platform\":\"Unknown\",\"count\":2029190304},{\"targetName\":\"Avs\",\"targetType\":\"WebApplication\",\"platform\":\"SaaS\",\"count\":1243645059},{\"targetName\":\"OracleIaasVM\",\"targetType\":\"WebServer\",\"platform\":\"Unknown\",\"count\":1605990961},{\"targetName\":\"FlexServerPG\",\"targetType\":\"Server\",\"platform\":\"IaaS\",\"count\":1958511129}],\"targetSourceMapping\":[{\"sourceRef\":\"OracleDatabase\",\"targetRef\":\"AzureSpringApps\",\"sourceCount\":1920880851,\"targetCount\":2084111616,\"migrationDetails\":{\"readinessSummary\":[{},{},{}],\"migrationType\":\"Retain\"},\"managementDetails\":[{},{},{},{}],\"costDetails\":[{},{},{},{}],\"savingsDetails\":[{}],\"confidenceScore\":75.4187100051518},{\"sourceRef\":\"Machine\",\"targetRef\":\"SqlMI\",\"sourceCount\":427242708,\"targetCount\":269303909,\"migrationDetails\":{\"readinessSummary\":[{},{},{},{}],\"migrationType\":\"Unknown\"},\"managementDetails\":[{},{},{},{}],\"costDetails\":[{}],\"savingsDetails\":[{},{},{},{}],\"confidenceScore\":4.201866864175463},{\"sourceRef\":\"IIS\",\"targetRef\":\"OracleIaasVM\",\"sourceCount\":854764023,\"targetCount\":1524544291,\"migrationDetails\":{\"readinessSummary\":[{},{},{},{}],\"migrationType\":\"Unknown\"},\"managementDetails\":[{},{},{}],\"costDetails\":[{},{},{}],\"savingsDetails\":[{}],\"confidenceScore\":64.2031591626506},{\"sourceRef\":\"OracleDatabase\",\"targetRef\":\"SAPAzureInstance\",\"sourceCount\":30564685,\"targetCount\":741108852,\"migrationDetails\":{\"readinessSummary\":[{}],\"migrationType\":\"Rehost\"},\"managementDetails\":[{},{}],\"costDetails\":[{},{},{},{}],\"savingsDetails\":[{}],\"confidenceScore\":0.24287252246378843}],\"costComponents\":[{\"savingOptions\":\"SavingsPlan1Year\",\"costDetail\":[{}]},{\"savingOptions\":\"SavingsPlan1Year\",\"costDetail\":[{}]}],\"savingsComponents\":[{\"savingOptions\":\"SavingsPlan1Year\",\"savingsDetail\":[{}]},{\"savingOptions\":\"SavingsPlan1Year\",\"savingsDetail\":[{},{},{},{}]},{\"savingOptions\":\"CustomAzureOfferCode\",\"savingsDetail\":[{},{},{},{}]}],\"assessmentName\":\"t\",\"discoveredLightSummary\":{\"numberOfWebApps\":207833423,\"numberOfWebAppsPerType\":[{\"webAppType\":\"Unknown\",\"count\":63177450},{\"webAppType\":\"Java\",\"count\":891101767},{\"webAppType\":\"ASP.Net\",\"count\":1493558591}],\"numberOfWebServersPerType\":[{\"webServerType\":\"IIS\",\"count\":1309614398},{\"webServerType\":\"Unknown\",\"count\":1520989721},{\"webServerType\":\"Unknown\",\"count\":223654021},{\"webServerType\":\"Unknown\",\"count\":306734530}],\"numberOfWebServers\":1177469779,\"numberOfServers\":124611793}},\"id\":\"sovmyokacspkwl\",\"name\":\"zdobpxjmflbvvnch\",\"type\":\"kcciwwzjuqkhr\"}";

        HttpClient httpClient
            = response -> Mono.just(new MockHttpResponse(response, 200, responseStr.getBytes(StandardCharsets.UTF_8)));
        MigrateManager manager = MigrateManager.configure()
            .withHttpClient(httpClient)
            .authenticate(tokenRequestContext -> Mono.just(new AccessToken("this_is_a_token", OffsetDateTime.MAX)),
                new AzureProfile("", "", AzureCloud.AZURE_PUBLIC_CLOUD));

        WebAppCompoundAssessmentSummary response = manager.compoundAssessmentSummaryOperations()
            .getWithResponse("f", "qsc", "eypvhezrkg", "hcjrefovgmk", com.azure.core.util.Context.NONE)
            .getValue();

        Assertions.assertEquals("t", response.properties().assessmentName());
        Assertions.assertEquals(207833423, response.properties().discoveredLightSummary().numberOfWebApps());
        Assertions.assertEquals(WebAppType.UNKNOWN,
            response.properties().discoveredLightSummary().numberOfWebAppsPerType().get(0).webAppType());
        Assertions.assertEquals(63177450,
            response.properties().discoveredLightSummary().numberOfWebAppsPerType().get(0).count());
        Assertions.assertEquals(WebServerType.IIS,
            response.properties().discoveredLightSummary().numberOfWebServersPerType().get(0).webServerType());
        Assertions.assertEquals(1309614398,
            response.properties().discoveredLightSummary().numberOfWebServersPerType().get(0).count());
        Assertions.assertEquals(1177469779, response.properties().discoveredLightSummary().numberOfWebServers());
        Assertions.assertEquals(124611793, response.properties().discoveredLightSummary().numberOfServers());
    }
}
